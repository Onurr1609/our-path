:root{
  --bg1:#ffb7d3;
  --bg2:#ffd3e5;
  --bg3:#ffe8f1;

  --card:#ffe9f3;
  --card2:#ffd7e8;

  --ink:#2b2b2b;
  --muted:#6b5b66;

  --pink:#ff5ca8;
  --pink2:#ff88c2;
  --pink3:#ffd1e6;

  --shadow: 0 30px 80px rgba(255, 92, 168, .25);
  --shadow2: 0 18px 40px rgba(0,0,0,.10);

  --border: rgba(255, 92, 168, .25);
  --border2: rgba(255, 255, 255, .55);

  --fontTitle:"Press Start 2P", system-ui, sans-serif;
  --fontBody:"VT323", ui-monospace, monospace;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  color:var(--ink);
  font-family:var(--fontBody);
  cursor: url('assets/cursor-heart.png'), auto;
  background: radial-gradient(1200px 600px at 30% 20%, var(--bg3), transparent 60%),
              radial-gradient(900px 500px at 70% 60%, #ffd0ea, transparent 60%),
              linear-gradient(135deg, var(--bg2), var(--bg1));
  overflow:hidden;
}

/* Background FX */
.bg{ position:fixed; inset:0; pointer-events:none; }
.bg__glow{
  position:absolute; inset:-20%;
  background: radial-gradient(circle at 50% 40%, rgba(255,255,255,.35), transparent 55%);
  filter: blur(6px);
}
.bg__dots{
  position:absolute; inset:0;
  background-image: radial-gradient(rgba(255,255,255,.25) 2px, transparent 2px);
  background-size: 44px 44px;
  opacity:.35;
}
.bg__floaters{
  position:absolute; inset:0;
  opacity:.25;
  background:
    radial-gradient(circle at 10% 30%, rgba(255,255,255,.55) 0 6px, transparent 7px),
    radial-gradient(circle at 25% 70%, rgba(255,255,255,.35) 0 5px, transparent 6px),
    radial-gradient(circle at 70% 25%, rgba(255,255,255,.45) 0 7px, transparent 8px),
    radial-gradient(circle at 85% 65%, rgba(255,255,255,.30) 0 6px, transparent 7px);
  animation: floaters 7s ease-in-out infinite;
}
@keyframes floaters{
  0%{ transform: translateY(0); }
  50%{ transform: translateY(-10px); }
  100%{ transform: translateY(0); }
}

/* Topbar */
.topbar{
  position:fixed;
  inset:16px 18px auto 18px;
  height:54px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding:10px 12px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.50), rgba(255,255,255,.22));
  border:1px solid rgba(255,255,255,.55);
  box-shadow: var(--shadow2);
  backdrop-filter: blur(10px);
}

.brand{
  display:flex; align-items:center; gap:10px;
  min-width: 260px;
}
.brand__dot{
  width:10px; height:10px; border-radius:50%;
  background: var(--pink);
  box-shadow: 0 0 0 5px rgba(255,92,168,.18);
}
.brand__title{
  font-family:var(--fontTitle);
  font-size:14px;
  letter-spacing:1px;
}
.brand__sub{
  margin-left:8px;
  font-size:18px;
  color:var(--muted);
  transform: translateY(1px);
}

.topbar__center{
  display:flex; gap:10px; align-items:center;
}
.topbar__actions{
  display:flex; gap:10px; align-items:center;
  min-width: 260px;
  justify-content:flex-end;
}

/* Chips */
.chip{
  pointer-events:auto;
  border:1px solid rgba(255,255,255,.65);
  background: rgba(255,255,255,.35);
  color:#3a2a35;
  padding:10px 14px;
  border-radius:999px;
  font-family:var(--fontTitle);
  font-size:11px;
  cursor:pointer;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
  box-shadow: 0 8px 18px rgba(0,0,0,.08);
}
.chip:hover{ transform: translateY(-1px); background: rgba(255,255,255,.50); }
.chip:active{ transform: translateY(0px); }
.chip--tab{ padding:10px 16px; }
.chip--mini{ padding:9px 12px; font-size:10px; }
.chip__lock{ font-family:var(--fontBody); font-size:16px; margin-left:6px; color:rgba(60,30,48,.7); }
.is-active{
  border-color: rgba(255,92,168,.35);
  background: rgba(255,255,255,.65);
  box-shadow: 0 10px 22px rgba(255,92,168,.16);
}

/* Stage / Views */
.stage{
  position:fixed;
  inset:90px 0 0 0;
  display:grid;
  place-items:center;
  padding: 28px 18px 26px;
}
.view{ display:none; width:100%; }
.view--active{ display:grid; place-items:center; }

/* Card */
.card{
  pointer-events:auto;
  width:min(860px, 92vw);
  background: linear-gradient(180deg, rgba(255,255,255,.60), rgba(255,255,255,.30));
  border:1px solid rgba(255,255,255,.60);
  border-radius:22px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  overflow:hidden;
}
.card--wide{
  width:min(980px, 94vw);
}

.card__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:16px 18px;
  border-bottom:1px solid rgba(255,255,255,.55);
  background: linear-gradient(180deg, rgba(255,255,255,.38), rgba(255,255,255,.12));
}
.card__body{
  padding:18px;
}

/* Pills / Mail header */
.pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:8px 12px;
  border-radius:999px;
  font-family:var(--fontTitle);
  font-size:10px;
  letter-spacing:.5px;
  border:1px solid rgba(255,255,255,.65);
  background: rgba(255,255,255,.55);
}
.pill--locked{
  border-color: rgba(255,92,168,.25);
  background: rgba(255,92,168,.08);
  color:#4a2238;
}
.pill--title{
  border-color: rgba(255,92,168,.22);
  background: rgba(255,255,255,.62);
}

.mailhead{
  display:flex; align-items:flex-start; justify-content:space-between; gap:16px;
  width:100%;
}
.mailhead__title{
  font-family:var(--fontTitle);
  font-size:18px;
  letter-spacing:1px;
}
.mailhead__from{
  font-family:var(--fontTitle);
  font-size:10px;
  padding:7px 10px;
  border-radius:999px;
  background: rgba(255,255,255,.55);
  border:1px solid rgba(255,255,255,.65);
  color:#4a2238;
}

/* Text bits */
.letter{ font-size:22px; line-height:1.45; margin:0 0 14px; color: rgba(60,30,48,.88); }
.heart{ filter: drop-shadow(0 8px 14px rgba(255,92,168,.25)); }
.subhint{ font-size:20px; color: rgba(60,30,48,.72); margin-top:8px; }
.tiny{ font-size:16px; color: rgba(60,30,48,.55); margin-top:8px; }

.unlockRow{ display:flex; gap:10px; align-items:center; }
.input{
  flex:1;
  padding:12px 14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.60);
  background: rgba(255,255,255,.55);
  font-family:var(--fontBody);
  font-size:20px;
  outline:none;
}
.input:focus{ border-color: rgba(255,92,168,.35); }

.error{
  margin-top:12px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,92,168,.30);
  background: rgba(255,92,168,.10);
  font-family:var(--fontTitle);
  font-size:10px;
  letter-spacing:.4px;
}
.hidden{ display:none !important; }

/* Stats */
.stats{ display:flex; gap:10px; align-items:center; }
.stat{
  display:flex; gap:8px; align-items:center;
  padding:8px 10px;
  border-radius:999px;
  background: rgba(255,255,255,.55);
  border:1px solid rgba(255,255,255,.65);
  font-family:var(--fontTitle);
  font-size:10px;
}
.stat__k{ opacity:.7; }
.stat__v{ color:#4a2238; }

/* Buttons */
.btn{
  border:1px solid rgba(255,255,255,.65);
  background: rgba(255,255,255,.55);
  color:#3a2a35;
  padding:11px 14px;
  border-radius:16px;
  font-family:var(--fontTitle);
  font-size:10px;
  cursor:pointer;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
  box-shadow: 0 10px 24px rgba(0,0,0,.10);
}
.btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.68); }
.btn:active{ transform: translateY(0px); }
.btn--primary{
  border-color: rgba(255,92,168,.30);
  background: linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.52));
}
.btn--ghost{
  background: rgba(255,255,255,.30);
}

/* Modal */
.modal{
  position:fixed; inset:0;
  display:grid; place-items:center;
  padding:18px;
  background: rgba(0,0,0,.45);
  z-index:9998;
}
.modal__box{
  width:min(560px, 94vw);
  border-radius:20px;
  border:1px solid rgba(255,255,255,.20);
  background: rgba(255,255,255,.18);
  backdrop-filter: blur(14px);
  box-shadow: 0 30px 120px rgba(0,0,0,.55);
  padding:16px;
  position:relative;
}
.modal__badge{
  display:inline-flex;
  padding:8px 12px;
  border-radius:999px;
  font-family:var(--fontTitle);
  font-size:10px;
  border:1px solid rgba(255,255,255,.30);
  background: rgba(255,255,255,.16);
  letter-spacing:.4px;
}
.modal__title{
  margin-top:12px;
  font-family:var(--fontTitle);
  font-size:14px;
  letter-spacing:.7px;
}
.modal__text{
  margin-top:10px;
  font-size:22px;
  line-height:1.45;
  color: rgba(255,255,255,.92);
}
.modal__actions{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.modal__x{
  position:absolute;
  top:10px; right:10px;
  width:34px; height:34px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.18);
  color: rgba(255,255,255,.92);
  cursor:pointer;
}

/* Shake helper */
.shake{ animation: shake .18s ease-in-out 0s 2; }
@keyframes shake{
  0%{ transform: translateX(0); }
  35%{ transform: translateX(-6px); }
  70%{ transform: translateX(6px); }
  100%{ transform: translateX(0); }
}

/* Float layer */
.float-layer{ position:fixed; inset:0; pointer-events:none; opacity:.55; }
.float-item{
  position:absolute;
  top:110%;
  font-size:18px;
  animation: floatUp 4.5s linear infinite;
}
@keyframes floatUp{
  from{ transform: translateY(0); }
  to{ transform: translateY(-140vh); }
}

/* bg-float tiny */
.bg-float{ position:fixed; inset:0; pointer-events:none; z-index:0; }
.floaty{
  position:absolute;
  left: var(--x);
  top: 110vh;
  font-size: var(--s);
  opacity: var(--o);
  filter: blur(var(--b));
  transform: rotate(var(--r));
  animation: floatyUp var(--d) linear infinite;
}
.floaty::before{ content: attr(data-emoji); }
@keyframes floatyUp{
  from{ transform: translateY(0) rotate(var(--r)); }
  to{ transform: translateY(-130vh) rotate(var(--r)); }
}

/* Kitty peeks */
.kitty-peek{
  position:fixed;
  width:96px;
  height:auto;
  opacity:.55;
  pointer-events:none;
  filter: drop-shadow(0 18px 35px rgba(0,0,0,.15));
}
.k1{ left:12px; bottom:-6px; transform: rotate(-5deg); }
.k2{ right:12px; bottom:-8px; transform: scaleX(-1) rotate(6deg); }

/* --- OUR PATH RUNNER --- */
.opRun{display:flex;flex-direction:column;gap:12px}
.opRun__top{display:flex;align-items:center;justify-content:space-between;gap:12px}
.opRun__title{font-family:var(--fontTitle);font-size:12px;letter-spacing:.55px}
.opRun__stats{font-family:var(--fontTitle);font-size:11px;opacity:.92}
.opRun__sep{opacity:.55;margin:0 6px}

.opRun__stage{
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  overflow:hidden;
  box-shadow:0 18px 60px rgba(0,0,0,.20);
}
#opCanvas{display:block;width:100%;height:auto}
.opRun__hint{padding:10px 12px;opacity:.9;font-size:12px;border-top:1px solid rgba(255,255,255,.10)}

.opRun__modal{
  position:fixed;inset:0;
  display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,.55);
  z-index:9999;
  padding:16px;
}
.opRun__modal.hidden{display:none}
.opRun__card{
  width:min(620px, 96vw);
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(20,20,26,.70);
  backdrop-filter: blur(12px);
  box-shadow:0 25px 100px rgba(0,0,0,.55);
  padding:14px;
  position:relative;
  overflow:hidden;
}
.opRun__cardTitle{font-family:var(--fontTitle);font-size:12px;letter-spacing:.55px;margin-bottom:8px}
.opRun__cardQ{opacity:.95;line-height:1.45;margin-bottom:10px;color:rgba(255,255,255,.92)}
.opRun__choices{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px}
.opRun__choice{min-width:180px}

.opRun__fb{padding:10px 12px;border-radius:14px;font-family:var(--fontTitle);font-size:11px;margin-top:8px;color:rgba(255,255,255,.92)}
.opRun__fb.hidden{display:none}
.opRun__fb.is-good{background:rgba(110,255,180,.18);border:1px solid rgba(110,255,180,.28)}
.opRun__fb.is-bad{background:rgba(255,110,160,.18);border:1px solid rgba(255,110,160,.28)}

.opRun__memory{margin-top:10px;padding:12px;border-radius:16px;border:1px dashed rgba(255,255,255,.30);background:rgba(255,255,255,.06);line-height:1.55;color:rgba(255,255,255,.92)}
.opRun__memory.hidden{display:none}

.opRun__actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.opRun__input{
  width: 220px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.92);
  outline: none;
}

.opRun__letter{
  white-space:pre-wrap;
  line-height:1.6;
  padding:12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  min-height:140px;
  color: rgba(255,255,255,.92);
}

/* Heart rain (finale) */
.opRun__heart{
  position:absolute;
  top:-30px;
  animation: opRunFall 4.8s linear forwards;
  filter: drop-shadow(0 0 14px rgba(255,255,255,.25));
  opacity:.95;
}
@keyframes opRunFall{
  to{ transform: translateY(520px); opacity:0; }
}
.opRun__noti{
  position:absolute;
  right:18px;
  top:64px;
  width:min(360px, calc(100% - 36px));
  background:rgba(40,15,30,0.92);
  border:1px solid rgba(255,92,168,0.45);
  border-radius:16px;
  padding:14px 14px;
  box-shadow:0 16px 50px rgba(0,0,0,0.35);
  animation:opNotiIn 0.6s ease both;
}
.opRun__notiTop{display:flex;flex-direction:column;gap:6px}
.opRun__notiBadge{font-size:12px;opacity:0.85}
.opRun__notiTitle{font-size:18px;color:#fff}
.opRun__notiText{margin-top:8px;opacity:0.92;color:#fff;font-size:13px;line-height:1.4}
@keyframes opNotiIn{
  from{transform:translateY(-10px);opacity:0}
  to{transform:translateY(0);opacity:1}
}
